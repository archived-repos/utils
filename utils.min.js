/*! jstool-utils 2015-04-22 */
!function(a,b){"use strict";"undefined"==typeof b?"undefined"!=typeof module&&(module.exports=a()):b.fn?fn.define("_",a):b._||(b._=a())}(function(){"use strict";function a(){for(var a,b=[],c=b.shift.call(arguments),d=b.shift.call(arguments);d;){for(a in d)c[a]=d[a];d=b.shift.call(arguments)}return c}function b(a){return function(b){return typeof b===a}}function c(a){return function(b){return b instanceof a}}function d(a,b,c){if(!a instanceof Object)return!1;var d,e=b.split(".");if(void 0!==c){if(e.length){d=e.shift();for(var f=e.shift();f;)a[d]||(a[d]={}),a=a[d],d=f,f=e.shift();return a[d]=c,c}return!1}for(var g=0,h=e.length,i=a||{};h>g;g++){if(d=e[g],!(d in i))return!1;i=i[e[g]]||{}}return i}function e(){if(arguments.length>1)for(var b=[].shift.call(arguments),c=[].shift.call(arguments);c;)a(b,c),c=[].shift.call(arguments)}function f(a,b){return a instanceof Array?g([],a,b):a instanceof Object?g({},a,b):a}function g(a,b,c){if(void 0===a)return f(b);if(b instanceof Array){if(!a instanceof Array)return g([],b,c);for(var d=0,e=b.length;e>d;d++)a[d]?a[d]=g(a[d],b[d],c):a.push(f(b[d]))}else if(b instanceof Object){if(!a instanceof Object)return g({},b,c);for(var h in b)c&&w.test(h)||(a[h]=g(a[h],b[h],c))}return a}function h(){if(arguments.length<2)return arguments[0];for(var a=x.shift.apply(arguments),b=x.shift.apply(arguments);b;)g(a,b),b=x.shift.apply(arguments);return a}function i(a){return g({},a,!0)}function j(a,b){for(var c=a[0].apply(null,b),d=1,e=a.length;e>d;d++)c=a[d](c);return c}function k(a,b){for(var c=0,d=b.length;d>c;c++){if(!b[c]instanceof Function)throw"only Functions are allowed as pipe arguments";a.push(b[c])}}function l(a,b,c){for(var d=0,e=a.length;e>d;d++)b.apply(c,[a[d],d])}function m(a,b,c){for(var d in a)b.call(c,[a[d],d])}function n(a,b,c){a instanceof Array?l(a,b,c):a instanceof Object&&m(a,b,c)}function o(a,b){if(!(b instanceof Function))return a.indexOf(b);for(var c=0,d=a.length;d>c;c++)if(b(a[c]))return c;return-1}function p(a,b){var c,d;if(b instanceof Function)for(c=0,d=a.length;d>c;c++)b(a[c])&&(a.splice(c,1),c--);else for(c=0,d=a.length;d>c;c++)a[c]===b&&(a.splice(c,1),c--)}function q(a,b){for(var c in b)if(a[c]!==b[c])return!1;return!0}function r(a,b){for(var c in b)if(a[c]===b[c])return!0;return!1}function s(a,b){for(var c=0,d=a.length;d>c;c++)if(q(a[c],b))return a[c];return!1}function t(a,b){for(var c=[],d=0,e=a.length;e>d;d++)q(a[d],b)&&c.push(a[d]);return c}function u(a){this.value=a}function v(a){return new u(a)}var w=/^\$\$/,x=[],y={isFunction:b("function"),isString:b("string"),isNumber:b("number"),isArray:c(Array),isDate:c(Date),isRegExp:c(RegExp),isObject:function(a,b){return a instanceof Object?"any"===b?!0:typeof a===(b||"object"):!1},key:d,keys:Object.keys,extend:e,matchAll:q,matchAny:r,find:s,filter:t,sanitize:i,merge:h,copy:function(a){return a instanceof Array?h([],a):h({},a)},each:n,indexOf:o,remove:p,pipe:function(){var a=[];k(a,arguments);var b=function(){return j(a,arguments)};return b.pipe=function(){return k(a,arguments),b},b},chain:function(a){return new u(a)}};return l(["key","keys","each","indexOf","remove"],function(a){u.prototype[a]=function(){[].unshift.call(arguments,this.value),v[a].apply(null,arguments)}}),e(v,y),v},this);