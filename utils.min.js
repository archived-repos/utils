/*! jstool-utils 2015-03-14 */
!function(a){"use strict";"undefined"==typeof window?"undefined"!=typeof module&&(module.exports=a()):window.fn?fn.define("_",a):window._||(window._=a())}(function(){"use strict";function a(a,b){for(var c in b)a[c]=b[c];return a}function b(a){return function(b){return typeof b===a}}function c(a){return function(b){return b instanceof a}}function d(a,b){return a instanceof Array?e([],a,b):a instanceof Object?e({},a,b):a}function e(a,b,c){if(void 0===a)return d(b);if(b instanceof Array){if(!a instanceof Array)return e([],b,c);for(var f=0,g=b.length;g>f;f++)a[f]?a[f]=e(a[f],b[f],c):a.push(d(b[f]))}else if(b instanceof Object){if(!a instanceof Object)return e({},b,c);for(var h in b)c&&l.test(h)||(a[h]=e(a[h],b[h],c))}return a}function f(){if(arguments.length<2)return arguments[0];for(var a=m.shift.apply(arguments),b=m.shift.apply(arguments);b;)e(a,b),b=m.shift.apply(arguments);return a}function g(a,b){if(void 0===b)return void 0;if(b instanceof Array){for(var c=0,d=b.length;d>c;c++)a[c]?a[c]=g(a[c],b[c]):a.push(g(a[c],b[c]));a.splice(c)}else if(b instanceof Object){for(var e in b)a[e]=g(a[e],b[e]);for(var f in a)void 0===b[f]&&delete a[f]}else a=b;return a}function h(a){return e({},a,!0)}function i(a,b){for(var c=a[0].apply(null,b),d=1,e=a.length;e>d;d++)c=a[d](c);return c}function j(a,b){for(var c=0,d=b.length;d>c;c++){if(!b[c]instanceof Function)throw"only Functions are allowed as pipe arguments";a.push(b[c])}}function k(a){this.value=a}var l=/^\$\$/,m=[],n={isFunction:b("function"),isString:b("string"),isNumber:b("number"),isArray:c(Array),isDate:c(Date),isRegExp:c(RegExp),isObject:function(a,b){return a instanceof Object?"any"===b?!0:typeof a===(b||"object"):!1},key:function(a,b,c){if(!a instanceof Object)return!1;var d,e=b.split(".");if(void 0!==c){if(e.length){d=e.shift();for(var f=e.shift();f;)a[d]||(a[d]={}),a=a[d],d=f,f=e.shift();return a[d]=c,c}return!1}for(var g=0,h=e.length,i=a||{};h>g;g++){if(d=e[g],!(d in i))return!1;i=i[e[g]]||{}}return i},keys:Object.keys,extend:function(){if(arguments.length>1)for(var b=[].shift.call(arguments),c=[].shift.call(arguments);c;)a(b,c),c=[].shift.call(arguments)},sanitize:h,deepExtend:f,deepAssign:g,pipe:function(){var a=[];j(a,arguments);var b=function(){return i(a,arguments)};return b.pipe=function(){return j(a,arguments),b},b},lazy:function(a){return new k(a)}};return k.prototype.each=function(a){for(var b=this.value,c=0,d=b.length;d>c;c++)a.call(null,b[c]);return this},k.prototype.indexOf=function(a){var b=this.value;if(!(a instanceof Function))return b.indexOf(a);for(var c=0,d=b.length;d>c;c++)if(a(b[c]))return c;return-1},n});